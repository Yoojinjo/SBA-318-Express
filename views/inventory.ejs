<!DOCTYPE html>
<html>
	<head>
		<title>LMS</title>
	</head>
	<style>
		table {
			font-family: arial, sans-serif;
			border-collapse: collapse;
			width: 100%;
		}

		td,
		th {
			border: 1px solid #dddddd;
			text-align: left;
			padding: 8px;
		}

		tr:nth-child(even) {
			background-color: #dddddd;
		}
		/* Button styles */
		.rent-button {
			background-color: green;
			color: white;
			border: none;
			padding: 10px 20px;
			cursor: pointer;
		}

		.rented-button {
			background-color: red;
			color: white;
			border: none;
			padding: 10px 20px;
			cursor: not-allowed; /* Disables the cursor */
		}
	</style>

	<body>
		<h1>Clothing Inventory</h1>
		<table>
			<tr>
				<th>ID</th>
				<th>Description</th>
				<th>Color</th>
				<th>Size</th>
				<th>Availability</th>
				<th>Rented to</th>
				<th>Price</th>
				<th>Rent Item</th>
				<th>Item Return</th>
				<th>Delete Item</th>
			</tr>
			<% data.forEach(element=> { %>
			<tr>
				<td><%= element.id %></td>
				<td><%= element.description %></td>
				<td><%= element.color %></td>
				<td><%= element.size %></td>
				<td><%= element.availability %></td>
				<td><%= element.rentedTo %></td>
				<td>$<%= element.price %></td>
				<td>
					<form action="/rent" method="post">
						<input
							type="text"
							style="display: none"
							name="clothesId"
							value="<%= element.id %>"
						/><% if (element.availability === "rented") { %>
						<button type="submit" class="rented-button" disabled>
							Rented!
						</button>
						<% } else { %>
						<select name="rentedTo" required>
							<option value="">Select Customer</option>
							<% customers.forEach(customer => { %>
							<option value="<%= customer.name %>">
								<%= customer.name%>
							</option>
							<% }) %>
						</select>
						<button type="submit" class="rent-button">
							Rent Out
						</button>
						<% } %>
					</form>
				</td>
				<td>
					<form action="/return" method="post">
						<input
							type="text"
							style="display: none"
							name="clothesId"
							value="<%= element.id %>"
						/>
						<button type="submit">Item Return</button>
					</form>
				</td>
				<td>
					<form
						action="/delete"
						method="post"
						onsubmit="return confirmDeletion()"
					>
						<input
							type="text"
							style="display: none"
							name="clothesId"
							value="<%= element.id %>"
						/>
						<button type="submit">Delete</button>
					</form>
				</td>
			</tr>
			<% }) %>
		</table>

		<h2>Add Clothing</h2>

		<form action="/inventory" method="post">
			<input
				type="text"
				placeholder="Clothes ID"
				name="clothesId"
				value="<%= inputValues ? inputValues.clothesId : '' %>"
			/>
			<input
				type="text"
				placeholder="Clothes Description"
				name="clothesDescription"
				value="<%= inputValues ? inputValues.clothesDescription : '' %>"
			/>
			<input
				type="text"
				placeholder="Clothes Color"
				name="clothesColor"
				value="<%= inputValues ? inputValues.clothesColor : '' %>"
			/>
			<input
				type="text"
				placeholder="Clothes Size"
				name="clothesSize"
				value="<%= inputValues ? inputValues.clothesSize : '' %>"
			/>
			<input
				type="text"
				placeholder="Clothes Price"
				name="clothesPrice"
				value="<%= inputValues ? inputValues.clothesPrice : '' %>"
			/>
			<button type="submit">Add</button>
		</form>

		<h2>Edit Clothing</h2>
		<form action="/inventory" method="post">
			<input
				type="text"
				placeholder="Clothes ID"
				name="editClothesId"
				value="<%= inputValues ? inputValues.clothesId : '' %>"
			/>
			<input
				type="text"
				placeholder="Clothes Description"
				name="editClothesDescription"
				value="<%= inputValues ? inputValues.clothesDescription : '' %>"
			/>
			<input
				type="text"
				placeholder="Clothes Color"
				name="editClothesColor"
				value="<%= inputValues ? inputValues.clothesColor : '' %>"
			/>
			<input
				type="text"
				placeholder="Clothes Size"
				name="editClothesSize"
				value="<%= inputValues ? inputValues.clothesSize : '' %>"
			/>
			<input
				type="text"
				placeholder="Clothes Price"
				name="editClothesPrice"
				value="<%= inputValues ? inputValues.clothesPrice : '' %>"
			/>
			<input
				type="text"
				placeholder="Clothes Availability"
				name="editClothesAvailability"
				value="<%= inputValues ? inputValues.clothesAvailability : '' %>"
			/>
			<input
				type="text"
				placeholder="Clothes Rented To"
				name="editClothesRentedTo"
				value="<%= inputValues ? inputValues.clothesRentedTo : '' %>"
			/>
			<button type="submit">Edit</button>
		</form>

		<p style="color: red"><%= errorMessage %></p>
		<script>
			function confirmDeletion() {
				return confirm("Are you sure you want to delete this item?");
			}
		</script>

		<script src="./script.js"></script>
	</body>
</html>
